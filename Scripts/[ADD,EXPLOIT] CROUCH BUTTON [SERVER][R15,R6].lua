warn("Crouch gui by Nineteen_DEV")

local Player= game.Players.LocalPlayer

function CreateGui()
	
	-- Instances:

	local CrouchUi = Instance.new("ScreenGui")
	local Button = Instance.new("ImageButton")
	local Icon = Instance.new("ImageLabel")

	--Properties:

	CrouchUi.Name = "CrouchUi"
	CrouchUi.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
	CrouchUi.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
	CrouchUi.ResetOnSpawn = false
	CrouchUi.DisplayOrder = 999999

	Button.Name = "Button"
	Button.Parent = CrouchUi
	Button.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
	Button.BackgroundTransparency = 1.000
	Button.BorderColor3 = Color3.fromRGB(0, 0, 0)
	Button.BorderSizePixel = 0
	Button.Position = UDim2.new(0.755247295, 0, 0.5, 0)
	Button.Size = UDim2.new(0.10854882, 0, 0.202314779, 0)
	Button.Image = "rbxassetid://6256840888"
	Button.ScaleType = Enum.ScaleType.Fit

	Icon.Name = "Icon"
	Icon.Parent = Button
	Icon.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
	Icon.BackgroundTransparency = 1.000
	Icon.BorderColor3 = Color3.fromRGB(0, 0, 0)
	Icon.BorderSizePixel = 0
	Icon.Size = UDim2.new(1, 0, 1, 0)
	Icon.Image = "rbxassetid://18658680369"
	Icon.ScaleType = Enum.ScaleType.Fit

	return CrouchUi
	
end

local CrouchUi = CreateGui()

CrouchUi.Parent = Player.PlayerGui

local UserInputService = game:GetService("UserInputService")
local CrouchKey = Enum.KeyCode.LeftControl

local Crouched = false

local BaseHipHeight
local Animation

function Crouch()
	
	Crouched = not Crouched
	
	if Crouched == true then
		
		local Character = Player.Character or Player.CharacterAdded:Wait()
		local Humanoid : Humanoid = Character:WaitForChild("Humanoid")
		
		local Animations = Character:WaitForChild("Animate")
		local Anim : Animation = Animations:WaitForChild("sit"):WaitForChild("SitAnim")
		
		Animation = Humanoid:LoadAnimation(Anim)
		Animation:Play()
		
		BaseHipHeight = Humanoid.HipHeight task.wait()
		
		Humanoid.HipHeight = .1
		
	else
		
		local Character = Player.Character or Player.CharacterAdded:Wait()
		local Humanoid : Humanoid = Character:WaitForChild("Humanoid")

		Humanoid.HipHeight = BaseHipHeight
		
		if Humanoid.Sit == false then
			
			Animation:Stop()
			
		end
		
		Humanoid.Jump = true
		
	end
	
end

CrouchUi.Button.Activated:Connect(Crouch)

UserInputService.InputBegan:Connect(function(Input, Process)
	
	if Process then return end
	
	if Input.KeyCode == CrouchKey then
		
		Crouch()
		
	end
	
end)
